!function(t){"use strict";var i=[],e=function(n,s){n||e.error("Missing selector."),e.isString(n)&&(n=e.$(n)),n||e.error("Element not found."),i.indexOf(n)!==-1&&e.error("An instance of Rider with this selector already exists."),i.push(n),this.options=e.extend(e.defaults,s||{}),this.events={start:null,render:null,end:null},this.element=n,this.items=e.$$("."+this.options.itemClass,n),this.items.forEach(function(t,i){t.setAttribute("data-rider-index",i.toString())}),this.itemClassTemplate=e.format("{0}--{status} {0}--{status}--{index} {0}--{status}--{direction} {0}--{status}--{direction}--{index}",this.options.itemClass),this.itemClassRemovePattern=new RegExp(e.format("{0}--(show|hide)(--)?(next|prev|init)?(--)?(\\d+)?",this.options.itemClass),"g"),this.elementClassTemplate=e.format("{0}--page-count--{total} {0}--current-page--{current} {0}--visible-count--{visible}",this.options.blockClass),this.elementClassRemovePattern=new RegExp(e.format("{0}--(page-count|current-page|visible-count)(--\\d+)?",this.options.blockClass),"g"),this.sliding=null,this.animationEvents=e.getAnimationEvents(),this.render(null,null,"init"),e.on(t,"RiderResize",this.resize.bind(this)),this.hasAnimation=!1,e.on(this.element,this.animationEvents.start,this.animationStart.bind(this)),e.on(this.element,this.animationEvents.end,this.animationEnd.bind(this)),this.plugins={},this.initPlugins()};e.defaults={blockClass:"rider",itemClass:"rider__item",visibleCount:1,page:1,reverseHideDirection:!1},e.prototype={resize:function(t){this.render()},render:function(t,i,n){var s=this;this.calculateValues(),n=n||"next",i=i||this.visibleItems,t?this.hide(t,n):this.reset(),i&&this.show(i,n),this.calculateValues(),this.outItems=t,this.nextItems=i,this.direction=n,e.removeClass(this.element,this.elementClassRemovePattern),e.addClass(this.element,e.format(this.elementClassTemplate,{total:this.pageCount,current:this.currentPage,visible:this.visibleCount})),setTimeout(function(){s.onRender()},0)},runCallback:function(t){var i="on"+t.charAt(0).toUpperCase()+t.slice(1);e.isFunction(this.options[i])&&this.options[i].call(this);var n=this.getCustomEvent(t);n&&this.element.dispatchEvent(n)},on:function(t,i){e.on(this.element,t,i)},off:function(t,i){e.on(this.element,t,i)},setCustomEvent:function(t){this.events[t]=new n(t,{detail:{rider:this},bubbles:!0,cancelable:!0})},getCustomEvent:function(t){return t in this.events&&this.events[t]?this.events[t].detail.rider=this:this.setCustomEvent(t),this.events[t]},show:function(t,i){this.update(t,"show",i)},hide:function(t,i){this.reset(),i&&this.options.reverseHideDirection&&(i="prev"===i?"next":"prev"),this.update(t,"hide",i)},reset:function(){var t=this;this.items.forEach(function(i){e.removeClass(i,t.itemClassRemovePattern)})},update:function(t,i,n){var s=this;t.forEach(function(t,o){e.addClass(t,e.format(s.itemClassTemplate,{status:i,direction:n||"next",index:o+1}))})},animationStart:function(t){this.hasAnimation||(this.hasAnimation=!0)},animationEnd:function(t){this.sliding&&(e.hasClass(t.target,this.options.itemClass+"--show")||e.hasClass(t.target,this.options.itemClass+"--hide"))&&this.onEnd()},onRender:function(){this.runCallback("render"),this.sliding&&!this.hasAnimation&&this.onEnd()},onStart:function(){this.sliding=!0,this.runCallback("start")},onEnd:function(){this.sliding=!1,this.runCallback("end")},calculateValues:function(){this.itemCount=this.items.length,this.visibleCount=this.getVisibleCount(),this.visibleItems=e.$$(e.format(".{0}--show",this.options.itemClass)),0===this.visibleItems.length&&(this.visibleItems=this.items.slice(0,this.visibleCount),this.show(this.visibleItems,"next")),this.pageCount=Math.ceil(this.itemCount/this.visibleCount),this.firstVisibleIndex=parseInt(this.visibleItems[0].getAttribute("data-rider-index")),this.currentPage=Math.ceil(this.firstVisibleIndex/this.visibleCount)+1,this.visibleItems.length!==this.visibleCount&&(this.visibleItems=this.items.slice(this.firstVisibleIndex,this.visibleCount),this.reset(),this.show(this.visibleItems,"next"))},getNextItemsForDirection:function(t,i){if(this.calculateValues(),1===this.pageCount)return this.$item;var e,n="prev"==t?-1:1;i=!!i&&parseInt(i);var s=i?("next"==t?i-2:i)*this.visibleCount:this.firstVisibleIndex,o=s+n*this.visibleCount;return i=i?i-n:this.currentPage,"prev"===t&&i===this.pageCount&&(o=this.visibleCount*(i-2)),e=this.items.slice(o,o+this.visibleCount),("next"===t&&i===this.pageCount||"prev"===t&&2===i)&&(e=this.items.slice(0,this.visibleCount)),("next"===t&&i===this.pageCount-1||"prev"===t&&1===i)&&(e=this.items.slice(-this.visibleCount)),e},getVisibleCount:function(){return e.isFunction(this.options.visibleCount)?this.options.visibleCount.call(this):parseInt(this.options.visibleCount)},slide:function(t){if(!this.sliding){this.onStart(),this.calculateValues();var i,n,s;"next"===t||"prev"===t?(s=t,n=this.getNextItemsForDirection(t)):(s=t>this.currentPage?"next":"prev",n=this.getNextItemsForDirection(s,t)),i=e.arrayDiff(this.visibleItems,n),this.render(i,n,s)}},next:function(){return this.slide("next")},prev:function(){return this.slide("prev")},initPlugins:function(){var t=this;e.each(e.plugins,function(i){e.isFunction(i)&&i.key&&(t.plugins[i.key]=function(){i.apply(t,[t].concat(Array.prototype.slice.call(arguments)))},e.isObject(t.options.plugins)&&e.isArray(t.options.plugins[i.key])&&t.plugins[i.key].apply(t,t.options.plugins[i.key]))})}},e.error=function(t){throw new Error(t)},e.on=function(t,i,n){e.each(t,function(t,e){t.addEventListener(i,n,!1)})},e.off=function(t,i,n){e.each(t,function(t,e){t.removeEventListener(i,n,!1)})},e.addClass=function(t,i){e.each(t,function(t){t.className=(t.className+" "+i).trim()})},e.removeClass=function(t,i){e.each(t,function(t){t.className=t.className.replace(i,"").replace(/\s\s+/g," ").trim()})},e.hasClass=function(t,i){if(t)return t.classList?t.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(t.className)},e.isString=function(t){return"string"==typeof t},e.isArray=function(t){return Array.isArray(t)},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isFunction=function(t){return t&&"[object Function]"===Object.prototype.toString.call(t)},e.template=function(t,i){if(e.isString(t)){var n=t;if(e.isObject(i))for(var s in i){var o=i[s];n=n.split("{"+s+"}").join(null===o?"":o)}else{var r=Array.prototype.slice.call(arguments,1);n=n.replace(/{(\d+)}/g,function(t,i){return"undefined"!=typeof r[i]?r[i]:t})}return n}return t(i)},e.format=function(){return e.template.apply(e,arguments)},e.extend=function(t,i){var e,n={};for(e in t)n[e]=t[e];for(e in i)n[e]=i[e];return n},e.$=function(t,i){return t?e.isString(t)?(i||document).querySelector(t):t:null},e.$$=function(t,i){return t?e.isString(t)?Array.prototype.slice.call((i||document).querySelectorAll(t)):e.isArray(t)?t:[t]:[]},e.each=function(t,i){return!(!t||!e.isFunction(i))&&void e.$$(t).forEach(function(t,e){i.apply(t,[t,e])})},e.index=function(t,i){return t?(e.isString(t)&&(t=(i||document).querySelector(t)),t?Array.prototype.indexOf.call(t.parentNode.children,t):null):null},e.arrayDiff=function(t,i){return t.filter(function(t){return i.indexOf(t)<0})},e.getAnimationEvents=function(){var t,i={},e=document.createElement("rider"),n={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart"},s={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==e.style[t]){i.start=n[t];break}for(t in s)if(void 0!==e.style[t]){i.end=s[t];break}return i},e.throttle=function(t,i,s){s=s||window;var o=!1,r=function(){o||(o=!0,requestAnimationFrame(function(){s.dispatchEvent(new n(i)),o=!1}))};e.on(s,t,r)},e.plugins=[],e.addPlugin=function(t,i){i.key=t,e[t]=i,e.plugins.push(e[t])};var n=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),e};if(n.prototype=t.CustomEvent?t.CustomEvent.prototype:{},t.CustomEvent=n,e.throttle("resize","RiderResize"),t.jQuery){var s=function(t){return this.each(function(){var i=$(this),n=i.data("rider"),s=$.extend({},e.defaults,i.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;n||i.data("rider",n=new e(this,s)),"number"==typeof t?n.slide(t):o&&n[o]()})};$.fn.rider=s,$.fn.rider.Constructor=e}t.Rider=e}(this);