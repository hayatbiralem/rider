!function(t){"use strict";t.RiderHelper={addClass:function(t,e){t&&(t.className=(t.className+" "+e).trim())},removeClass:function(t,e){t&&(t.className=t.className.replace(e,"").replace(/\s\s+/g," ").trim())},hasClass:function(t,e){if(t)return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isArray:function(t){return Array.isArray(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return t&&"[object Function]"===Object.prototype.toString.call(t)},template:function(t,e){if("string"==typeof t){var i=t;if(this.isObject(e))for(var n in e){var s=e[n];i=i.split("{"+n+"}").join(null===s?"":s)}else{var o=Array.prototype.slice.call(arguments,1);i=i.replace(/{(\d+)}/g,function(t,e){return"undefined"!=typeof o[e]?o[e]:t})}return i}return t(e)},format:function(){return this.template.apply(this,arguments)},extend:function(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n},$:function(t,e){return Array.prototype.slice.call((e||document).querySelectorAll(t))},arrayDiff:function(t,e){return t.filter(function(t){return e.indexOf(t)<0})},getAnimationEndEvent:function(){var t,e=document.createElement("rider"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(void 0!==e.style[t])return i[t]},camelize:function(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return 0===+t?"":0==e?t.toLowerCase():t.toUpperCase()})}}}(this),function(){var t=function(t,e,i){i=i||window;var n=!1,s=function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(new CustomEvent(e)),n=!1}))};i.addEventListener(t,s)};t("resize","RiderResize")}(),function(t,e){function i(){this.expando="RiderData"+i.uid++}function n(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function s(t){return t.replace(r,"ms-").replace(a,l)}var o=/\S+/g,r=/^-ms-/,a=/-([a-z])/g,l=function(t,e){return e.toUpperCase()};i.uid=1,i.prototype={cache:function(t){var e=t[this.expando];return e||(e={},n(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[s(e)]=i;else for(n in e)o[s(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][s(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,i){var n,r=t[this.expando];if(void 0!==r){if(void 0!==i){e.isArray(i)?i=i.map(s):(i=s(i),i=i in r?[i]:i.match(o)||[]),n=i.length;for(;n--;)delete r[i[n]]}(void 0===i||e.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var i=t[this.expando];return void 0!==i&&!e.isEmptyObject(i)}},t.RiderData=i,e.data=new i}(this,RiderHelper),function(t,e){"use strict";var i=function(i,n){this.options=e.extend({blockClass:"rider",itemClass:"rider__item",visibleCount:1,page:1,reverseHideDirection:!1},n||{}),this.events={},this.element=i,this.items=e.$(e.format(".{0}",this.options.itemClass),i),this.items.forEach(function(t,e){t.setAttribute("data-rider-index",e.toString())}),this.itemClassTemplate="{item}--{status} {item}--{status}--{index} {item}--{status}--{direction} {item}--{status}--{direction}--{index}",this.itemClassRemovePattern=new RegExp(e.format("{0}--(show|hide)(--)?(next|prev|init)?(--)?(\\d+)?",this.options.itemClass),"g"),this.elementClassTemplate="{element}--page-count--{total} {element}--current-page--{current} {element}--visible-count--{visible}",this.elementClassRemovePattern=new RegExp(e.format("{0}--(page-count|current-page|visible-count)(--\\d+)?",this.options.blockClass),"g"),this.sliding=null,this.animationEndEvent=e.getAnimationEndEvent(),this.render(null,null,"init"),t.addEventListener("RiderResize",this.resize.bind(this)),this.element.addEventListener(this.animationEndEvent,this.animationEnd.bind(this))};i.prototype.resize=function(t){this.render()},i.prototype.render=function(t,i,n){var s=this;this.calculateValues(),n=n||"next",i=i||this.visibleItems,t?this.hide(t,n):this.reset(),i&&this.show(i,n),this.calculateValues(),e.removeClass(this.element,this.elementClassRemovePattern),e.addClass(this.element,e.format(this.elementClassTemplate,{element:this.options.blockClass,total:this.pageCount,current:this.currentPage,visible:this.visibleCount})),setTimeout(function(){s.onRender()},0)},i.prototype.runCallback=function(t){var i=e.camelize("on "+t);e.isFunction(this.options[i])&&this.options[i].call(this),this.element.dispatchEvent(this.getCustomEvent(t))},i.prototype.on=function(t,e){this.element.addEventListener(t,e,!1)},i.prototype.off=function(t,e){this.element.removeEventListener(t,e,!1)},i.prototype.setCustomEvent=function(t){var e=this;this.events[t]=new CustomEvent(t,{detail:{rider:e},bubbles:!0,cancelable:!0})},i.prototype.getCustomEvent=function(t){return t in this.events?this.events[t].detail.rider=this:this.setCustomEvent(t),this.events[t]},i.prototype.show=function(t,e){this.update(t,"show",e)},i.prototype.hide=function(t,e){this.reset(),e&&this.options.reverseHideDirection&&(e="prev"===e?"next":"prev"),this.update(t,"hide",e)},i.prototype.reset=function(){var t=this;this.items.forEach(function(i){e.removeClass(i,t.itemClassRemovePattern)})},i.prototype.update=function(t,i,n){var s=this;t.forEach(function(t,o){e.addClass(t,e.format(s.itemClassTemplate,{item:s.options.itemClass,status:i,direction:n||"next",index:o+1}))})},i.prototype.animationEnd=function(t){e.hasClass(t.target,e.format("{0}--show--1",this.options.itemClass))&&this.onEnd()},i.prototype.onRender=function(){this.runCallback("render")},i.prototype.onStart=function(){this.sliding=!0,this.runCallback("start")},i.prototype.onEnd=function(){this.sliding=!1,this.runCallback("end")},i.prototype.calculateValues=function(){this.itemCount=this.items.length,this.visibleCount=this.getVisibleCount(),this.visibleItems=e.$(e.format(".{0}--show",this.options.itemClass)),0===this.visibleItems.length&&(this.visibleItems=this.items.slice(0,this.visibleCount),this.show(this.visibleItems,"next")),this.pageCount=Math.ceil(this.itemCount/this.visibleCount),this.firstVisibleIndex=parseInt(this.visibleItems[0].getAttribute("data-rider-index")),this.currentPage=Math.ceil(this.firstVisibleIndex/this.visibleCount)+1,this.visibleItems.length!==this.visibleCount&&(this.visibleItems=this.items.slice(this.firstVisibleIndex,this.visibleCount),this.reset(),this.show(this.visibleItems,"next"))},i.prototype.getNextItemsForDirection=function(t,e){if(this.calculateValues(),1===this.pageCount)return this.$item;var i,n="prev"==t?-1:1;e=!!e&&parseInt(e);var s=e?("next"==t?e-2:e)*this.visibleCount:this.firstVisibleIndex,o=s+n*this.visibleCount;return e=e?e-n:this.currentPage,"prev"===t&&e===this.pageCount&&(o=this.visibleCount*(e-2)),i=this.items.slice(o,o+this.visibleCount),("next"===t&&e===this.pageCount||"prev"===t&&2===e)&&(i=this.items.slice(0,this.visibleCount)),("next"===t&&e===this.pageCount-1||"prev"===t&&1===e)&&(i=this.items.slice(-this.visibleCount)),i},i.prototype.getVisibleCount=function(){return e.isFunction(this.options.visibleCount)?this.options.visibleCount.call(this):parseInt(this.options.visibleCount)},i.prototype.getDomArray=function(t,e){return Array.prototype.slice.call((e||this.element).querySelectorAll(t))},i.prototype.slide=function(t){if(!this.sliding){this.onStart(),this.calculateValues();var i,n,s;switch(t){case"next":case"prev":s=t,n=this.getNextItemsForDirection(t);break;default:s=t>this.currentPage?"next":"prev",n=this.getNextItemsForDirection(s,t)}i=e.arrayDiff(this.visibleItems,n),this.render(i,n,s)}},i.prototype.next=function(){return this.slide("next")},i.prototype.prev=function(){return this.slide("prev")},"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:t.Rider=i}(this,RiderHelper);